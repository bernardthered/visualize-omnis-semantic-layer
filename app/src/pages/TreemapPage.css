/* ── Layout ── */
.treemap-page {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

.treemap-header {
  padding: 10px 16px;
  display: flex;
  align-items: center;
  gap: 14px;
  border-bottom: 1px solid #1e2533;
  flex-shrink: 0;
  background: var(--bg-sidebar);
}

.treemap-breadcrumb {
  font-size: 13px;
  color: #64748b;
  display: flex;
  align-items: center;
  gap: 6px;
}
.treemap-breadcrumb span { cursor: pointer; color: #7c8cf8; transition: color 0.15s; }
.treemap-breadcrumb span:hover { color: #a5b4fc; }
.treemap-breadcrumb .sep { color: #334155; cursor: default; }
.treemap-breadcrumb .current { color: #94a3b8; cursor: default; }

.treemap-stats {
  margin-left: auto;
  font-size: 12px;
  color: #475569;
  display: flex;
  gap: 16px;
}
.treemap-stats b { color: #94a3b8; }

/* ── Chart ── */
.treemap-chart {
  flex: 1;
  overflow: hidden;
  position: relative;
}
.treemap-svg { width: 100%; height: 100%; display: block; }

/* ── Cells ── */
.cell { cursor: pointer; }
.cell rect {
  stroke: #0f1117;
  stroke-width: 1.5px;
  transition: filter 0.12s;
}
.cell:hover rect { filter: brightness(1.3); }
.cell text {
  pointer-events: none;
  dominant-baseline: hanging;
  fill: rgba(255,255,255,0.92);
}
.cell text.label-name { font-size: 12px; font-weight: 600; }
.cell text.label-sub  { font-size: 10px; fill: rgba(255,255,255,0.52); }
.cell-group rect { stroke: rgba(255,255,255,0.18); stroke-width: 1px; }
.cell-field rect { stroke-width: 0.5px; }
.cell-field text.label-name { font-size: 11px; font-weight: 500; }
.cell-ref rect   { stroke-width: 0.5px; }
.cell-ref text.label-name { font-size: 11px; font-weight: 500; }

/* ── Tooltip ── */
.treemap-tooltip {
  position: absolute;
  pointer-events: none;
  background: #1e2533;
  border: 1px solid #334155;
  border-radius: 6px;
  padding: 10px 12px;
  font-size: 12px;
  line-height: 1.6;
  max-width: 260px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.5);
  opacity: 0;
  transition: opacity 0.1s;
  color: #e2e8f0;
}
.treemap-tooltip.visible { opacity: 1; }
.treemap-tooltip .tt-title { font-weight: 700; font-size: 13px; color: #f1f5f9; margin-bottom: 4px; }
.treemap-tooltip .tt-row   { color: #94a3b8; }
.treemap-tooltip .tt-row b { color: #cbd5e1; }

/* ── Legend ── */
.treemap-legend {
  padding: 8px 16px;
  display: flex;
  gap: 16px;
  align-items: center;
  border-top: 1px solid #1e2533;
  flex-shrink: 0;
  font-size: 11px;
  color: #64748b;
  flex-wrap: wrap;
  background: var(--bg-sidebar);
}
.treemap-legend .legend-item  { display: flex; align-items: center; gap: 5px; }
.treemap-legend .legend-swatch { width: 10px; height: 10px; border-radius: 2px; flex-shrink: 0; }
.treemap-legend .hint         { margin-left: auto; font-size: 11px; }
.treemap-legend .legend-sep   { color: #334155; }
